<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игра с сундуками</title>
    <style>
        body {
            background-size: cover;
            background-position: center;
            text-align: center;
        }
        .container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 0 auto;
        }
        .box {
            width: 100px;
            height: 100px;         
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            background-size: cover;
            background-position: center;
        }
        .hidden {
            display: none;
        }
        h1 {
            color: gold;
        }
        #promo-container {
            margin-bottom: 20px;
        }
        #message {
            font-size: 24px;
            color: gold;
            margin-top: 20px;
        }
        #prize {
            margin-top: 20px;
        }
    </style>
</head>
<body style="background-image: url('https://umbphotos.ag/images/375b18fa3ffcc616179b8cf6ed4732c6.webp');">
    <h1></h1>
    <img id="banner" src="https://umbphotos.ag/images/e8bbf22d5f646b328cb2199c5f9a5650.jpg" alt="Баннер" style="width: 100%; max-width: 400px; margin-bottom: 20px;">
    <div id="promo-container">
        <input type="text" id="promo-code" placeholder="Введите промокод">
        <button onclick="checkPromoCode()">Активировать попытку</button>
    </div>
    <div class="container hidden" id="game-container">
        <div class="box" onclick="checkBox(this, 0)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 1)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 2)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 3)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 4)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 5)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 6)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 7)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
        <div class="box" onclick="checkBox(this, 8)" style="background-image: url('https://umbphotos.ag/images/493a8ec7e0d23a2040eace64874b2125.png');"></div>
    </div>
    <div id="message" class="hidden"></div>
    <img id="prize" src="https://umbphotos.ag/images/3ead72ab23cf030f6da0985b70e80156.png" class="hidden" alt="Приз">
    <script>
        let attempts = 0;
        let prizeGiven = false;
        let prizeAttempt = Math.floor(Math.random() * 5) + 1;
        let promoCodes = [
            "OPA3GIN5", "BUY6JKAS", "FRS9EEOT", "NPZSL44M", "ALA99B1Z",
            "LNJ2YH5T", "DJUHO246", "4O2TB4PT", "HDPGED2M", "551B4ICL",
            "M0U3N74Q", "I9HEIDUL", "219M6DJQ", "5J5XK2PV", "ZASWUWF6",
            "W9HBW4V1", "G77LEJO6", "DQ2XGL78", "DYT2ZX4D", "CFSN93VN",
            "44QGI2AB", "4TC8RTND", "KPID6N8S", "WZQCKI7E", "ZO4SYCGP",
            "J5KKIAB9", "30C8W4YP", "C345XOAT", "DVI2GTYP", "WH15PGMF",
            "EH3EIHO4", "ZLAIW8SG", "9XDQN8WE", "I5G3RJQS", "6QD7DSEM",
            "28DLWMRY", "3P041IHO", "JZ57Z02Q", "0XLRF6NP", "N2ZUJ8K7",
            "KIA0UIOP", "0QT1ORE7", "QEULL3ZD", "RQ4IJAJF", "C88X5HEA",
            "7N18LO6C", "FNCEH0W8", "LMYVLEB2", "1JNQX6KJ", "NDHAL604",
            "BA5WV46R", "Y2YFZ235", "46TY1IFA", "JTS1H558", "260QNLAS",
            "LFOS4UCY", "IDIWO22Z", "PD1LZ8BQ", "D2PRVVA0", "GLH1UD7R",
            "CZFW7CSZ", "7V7PRO6D", "FU7XUYRK", "1RQ7IIQ2", "IF87FRIK",
            "R20FH1HI", "Y30132RQ", "A8NYPOLM", "YTSLYV04", "LDW7Q40M",
            "3H95DGKI", "89GJM9MD", "TSLDSJK4", "6BYQQYIY", "WVW7AWO4",
            "AOX1REAA", "HSVF5ZSM", "RKZT0CVK", "9NK8GNP1", "BSM0PZQI",
            "UVL3AF3B", "5TPKKH89", "XIAL85OU", "HM3XNJEU", "Q644JI3W",
            "FNSXLQ90", "N45V27QW", "RM3IBIM4", "HAR207F6", "UV8KQYLG",
            "T5AAA9SL", "Y9WLGX5H", "WF5NPVMB", "N2VP0M9A", "5ZAQP3LJ",
            "N89ZK8VL", "WYAFYZK6", "QOU39VV1", "R6RLXAIM", "3Y1D8OC5"

        ];

        // Загрузка использованных промокодов из localStorage
        let usedPromoCodes = JSON.parse(localStorage.getItem('usedPromoCodes')) || [];

        function checkPromoCode() {
            const promoCode = document.getElementById('promo-code').value;
            const promoIndex = promoCodes.indexOf(promoCode);
            if (promoIndex !== -1 && !usedPromoCodes.includes(promoCode)) {
                promoCodes.splice(promoIndex, 1); // Удаление использованного промокода из доступных кодов
                usedPromoCodes.push(promoCode); // Добавление в использованные промокоды
                localStorage.setItem('usedPromoCodes', JSON.stringify(usedPromoCodes)); // Сохранение в localStorage
                document.getElementById('promo-container').classList.add('hidden');
                document.getElementById('game-container').classList.remove('hidden');
                resetGame(); // Сброс сообщений и изображений
            } else {
                alert('Неверный или уже использованный промокод!');
            }
        }

        function checkBox(element, index) {
            attempts++;
            const messageElement = document.getElementById('message');
            const prizeElement = document.getElementById('prize');
            messageElement.classList.remove('hidden');
            if (attempts % 10 === prizeAttempt && !prizeGiven) {
                prizeGiven = true;
                prizeElement.classList.remove('hidden');
                messageElement.textContent = 'Поздравляем! Вы выиграли  1г. Вы можете  забрать  свой  приз  у  оператора Кетт';
            } else {
                prizeElement.classList.add('hidden');
                messageElement.textContent = 'Попробуй еще раз';
            }
            document.getElementById('promo-container').classList.remove('hidden');
            document.getElementById('game-container').classList.add('hidden');
        }

        function resetGame() {
            const messageElement = document.getElementById('message');
            const prizeElement = document.getElementById('prize');
            messageElement.classList.add('hidden');
            prizeElement.classList.add('hidden');
            messageElement.textContent = '';
        }
    </script>
</body>
</html>
